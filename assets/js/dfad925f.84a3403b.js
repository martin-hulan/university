"use strict";(self.webpackChunkuniversity=self.webpackChunkuniversity||[]).push([[1599],{7043:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var i=t(5893),s=t(1151);const r={title:"Find & Replace Values"},o=void 0,d={id:"extensions/find-replace-values/index",title:"Find & Replace Values",description:"Formerly known as Value Transformations",source:"@site/docs/extensions/find-replace-values/index.md",sourceDirName:"extensions/find-replace-values",slug:"/extensions/find-replace-values/",permalink:"/docs/extensions/find-replace-values/",draft:!1,unlisted:!1,editUrl:"https://github.com/rossumai/university/tree/master/docs/extensions/find-replace-values/index.md",tags:[],version:"current",frontMatter:{title:"Find & Replace Values"},sidebar:"extensionsSidebar",previous:{title:"Configuration examples",permalink:"/docs/extensions/custom-format-templating/configuration-examples"},next:{title:"Configuration examples",permalink:"/docs/extensions/find-replace-values/configuration-examples"}},a={},l=[{value:"Installation",id:"installation",level:2},{value:"What can it do?",id:"what-can-it-do",level:2},{value:"What can&#39;t it do?",id:"what-cant-it-do",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Available configuration options",id:"available-configuration-options",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Formerly known as Value Transformations"})}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.admonition,{title:"Work in progress",type:"warning",children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Describe how to create and configure the extension."})})}),"\n",(0,i.jsx)(n.h2,{id:"what-can-it-do",children:"What can it do?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cleaning the existing value of the field and putting it into another or the same field based on a specific pattern."}),"\n",(0,i.jsx)(n.li,{children:"Finding a specific pattern inside a value and putting only it into another or the same field."}),"\n",(0,i.jsx)(n.li,{children:"Running Python3 conditions to determine if actions must be performed."}),"\n",(0,i.jsx)(n.li,{children:"Running Regex match to determine if a transformation should be applied."}),"\n",(0,i.jsx)(n.li,{children:"Defining self-execution on a queue level."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"what-cant-it-do",children:"What can't it do?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'React to "No match" scenarios: if no match is found, the value from the source field is copied "as-is" to the target field (you need to set up action condition to avoid this behavior).'}),"\n",(0,i.jsxs)(n.li,{children:["Provide conditional mapping of values: for this, you need to use another extension called ",(0,i.jsx)(n.a,{href:"/docs/extensions/copy-paste-values/",children:"Copy & Paste Values"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(n.p,{children:["The main mechanism is Python 3's ",(0,i.jsx)(n.code,{children:"re"})," library, which handles regex (Regular Expressions)."]}),"\n",(0,i.jsxs)(n.p,{children:["All you need to know is that we do not use the whole spectrum of methods, but only the ",(0,i.jsx)(n.code,{children:"substitute"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"re.sub(pattern, repl, string, count=0, flags=0)\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pattern"})," is the regex pattern"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"repl"})," is the replacement string"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"string"})," is the input string (in our case, the value from a field)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["In the configuration, you do not need to worry about the ",(0,i.jsx)(n.code,{children:"string"})," parameter as it is taken from ",(0,i.jsx)(n.code,{children:"source"})," fields configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "source_target_mappings": [\n    {\n      "source": "item_description",\n      "target": "item_description_normalized"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["However, you need to take care of ",(0,i.jsx)(n.code,{children:"pattern"})," and ",(0,i.jsx)(n.code,{children:"repl"}),". In our configuration, they are presented as:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pattern_to_replace"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"value_to_replace_with"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["See section ",(0,i.jsx)(n.a,{href:"#available-configuration-options",children:"Available configuration options"})," below for more parameters to customize the behavior."]}),"\n",(0,i.jsx)(n.h2,{id:"available-configuration-options",children:"Available configuration options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Root"}),(0,i.jsx)(n.th,{children:"Parameter name"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:"List of actions to be performed. See a description of the action parameters below."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"source_target_mappings"})}),(0,i.jsx)(n.td,{children:"List of source and target field schema IDs."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions.source_target_mappings"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"source"})}),(0,i.jsx)(n.td,{children:"Source schema_id of the initial value to be transformed."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions.source_target_mappings"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"target"})}),(0,i.jsx)(n.td,{children:"Target field\u2019s schema_id where the extension will store the transformed value."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transformations"})}),(0,i.jsx)(n.td,{children:"List of transformations to perform on the value of the source field. See a description of the transformation parameters below."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"queue_ids"})}),(0,i.jsx)(n.td,{children:"Queue IDs where the extension should perform the particular action. You can assign the extension to multiple queues and specify numerous actions for different queues in one instance. It\u2019s optional. If not present, the extension will act on all the queues to which it is assigned unless excluded_queue_ids is set."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"excluded_queue_ids"})}),(0,i.jsx)(n.td,{children:"Queue IDs where the function won\u2019t perform the action. This parameter cannot be set along with queue_ids. It\u2019s optional."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"action_condition"})}),(0,i.jsxs)(n.td,{children:["Condition\u2019s definition for a particular action. Condition needs to evaluate to bool (True or False). When defined, the action will be evaluated. If True, the extension will apply the action\u2019s transformation; otherwise, it won\u2019t. It\u2019s a Python condition where schema fields are referenced by their schema_id enclosed in ",". Example: ",(0,i.jsx)(n.code,{children:"{item_code} != '' and {document_type} == 'invoice'"})," . ",(0,i.jsx)(n.a,{href:"https://docs.python.org/3.8/reference/expressions.html",children:"Python expressions documentation"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"additional_user_update_trigger"})}),(0,i.jsx)(n.td,{children:"Additional list of schema_ids that will trigger the action if a user modified a field with such name."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"actions"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"allow_target_update"})}),(0,i.jsx)(n.td,{children:"If set to true, it prevents the action from overwriting the target value when the user updates it manually. Default false."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transformations"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"pattern_to_replace"})}),(0,i.jsx)(n.td,{children:"The regular expression defines a pattern in the value to be found and replaced. Python regular expressions."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transformations"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"value_to_replace_with"})}),(0,i.jsx)(n.td,{children:"This value will replace all pattern occurrences matching the regular expression defined in the pattern_to_replace parameter."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transformations"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"replace_if_this_pattern_matches"})}),(0,i.jsx)(n.td,{children:"Regular expression defines the condition for a transformation to be applied. Extension will apply the transformation if the value matches the expression. Python regular expressions."})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You can use ",(0,i.jsx)(n.code,{children:"replace_if_this_pattern_matches"})," to apply a transformation. This means if the expression in this parameter is not fulfilled, the source value will be copied as-is to the target value."]})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>o});var i=t(7294);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);