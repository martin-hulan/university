"use strict";(self.webpackChunkuniversity=self.webpackChunkuniversity||[]).push([[124],{2588:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"learn/sandboxes/deployment-patterns","title":"Sandboxes: Deployment patterns","description":"Each company has its own deployment pattern. The most common ones (supported by Rossum Sandboxing tool) are:","source":"@site/docs/learn/sandboxes/deployment-patterns.md","sourceDirName":"learn/sandboxes","slug":"/learn/sandboxes/deployment-patterns","permalink":"/docs/learn/sandboxes/deployment-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/rossumai/university/tree/master/docs/learn/sandboxes/deployment-patterns.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"sidebar_label":"Deployment patterns","title":"Sandboxes: Deployment patterns"},"sidebar":"learnSidebar","previous":{"title":"Sandboxes","permalink":"/docs/learn/sandboxes/"},"next":{"title":"SFTP and S3 imports/exports","permalink":"/docs/learn/sftp-s3-import-export/"}}');var t=s(4848),r=s(8453);const a={sidebar_position:1,sidebar_label:"Deployment patterns",title:"Sandboxes: Deployment patterns"},i="Deployment patterns",d={},c=[{value:"Single environment for sandbox and production",id:"single-environment-for-sandbox-and-production",level:2},{value:"Two environments for sandbox and production",id:"two-environments-for-sandbox-and-production",level:2},{value:"Three environments for sandbox, UAT, and production",id:"three-environments-for-sandbox-uat-and-production",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deployment-patterns",children:"Deployment patterns"})}),"\n",(0,t.jsx)(n.p,{children:"Each company has its own deployment pattern. The most common ones (supported by Rossum Sandboxing tool) are:"}),"\n",(0,t.jsx)(n.h2,{id:"single-environment-for-sandbox-and-production",children:"Single environment for sandbox and production"}),"\n",(0,t.jsx)(n.p,{children:"This is the simplest pattern for companies who do not have the need for separate sandbox environment."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(6278).A+"",width:"3124",height:"564"})}),"\n",(0,t.jsx)(n.p,{children:"To start using this patten, simply initialize a new project in some empty directory using the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"prd init\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This command will create a new ",(0,t.jsx)(n.code,{children:"credentials.json"})," file. Fill in your username and password for ",(0,t.jsx)(n.code,{children:"source"})," (you can leave ",(0,t.jsx)(n.code,{children:"target"})," section as is for this simple setup):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="credentials.json"',children:'{\n  "source": {\n    "username": "CHANGE ME",\n    "password": "CHANGE ME"\n  },\n  "target": {\n    "username": "...",\n    "password": "..."\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Also configure the ",(0,t.jsx)(n.code,{children:"source_api_base"})," in ",(0,t.jsx)(n.code,{children:"prd_config.yaml"})," file. By default, it would be:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="prd_config.yaml"',children:"source_api_base: 'https://api.elis.rossum.ai/v1'\nuse_same_org_as_target: true\n"})}),"\n",(0,t.jsx)(n.p,{children:"Now you can pull (and eventually commit into Git) your whole organization configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"prd pull\n"})}),"\n",(0,t.jsx)(n.p,{children:"Once you commit this initial version to Git, you can update any configuration and deploy it to the same organization using the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"prd push\n"})}),"\n",(0,t.jsx)(n.h2,{id:"two-environments-for-sandbox-and-production",children:"Two environments for sandbox and production"}),"\n",(0,t.jsxs)(n.p,{children:["A bit more advanced setup with two environments: sandbox and production. Typically, the solution is first deployed to the sandbox organization (",(0,t.jsx)(n.code,{children:"source"}),") and once tested, released to production (",(0,t.jsx)(n.code,{children:"target"}),")."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(8421).A+"",width:"2776",height:"1524"})}),"\n",(0,t.jsxs)(n.p,{children:["To use this pattern, follow the same steps as outlined in the ",(0,t.jsx)(n.a,{href:"#single-environment-for-sandbox-and-production",children:"Simple environment example"})," and first init your local repository:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"prd init\n"})}),"\n",(0,t.jsxs)(n.p,{children:["However, now setup both ",(0,t.jsx)(n.code,{children:"source"})," and ",(0,t.jsx)(n.code,{children:"target"})," organizations:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="credentials.json"',children:'{\n  "source": {\n    "username": "CHANGE ME",\n    "password": "CHANGE ME"\n  },\n  "target": {\n    "username": "CHANGE ME",\n    "password": "CHANGE ME"\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Notice that ",(0,t.jsx)(n.code,{children:"use_same_org_as_target"})," is now set to false:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="prd_config.yaml"',children:"source_api_base: 'https://api.elis.rossum.ai/v1'\ntarget_api_base: 'https://api.elis.rossum.ai/v1'\nuse_same_org_as_target: false\n"})}),"\n",(0,t.jsxs)(n.p,{children:["To push local changes to the sandbox, run ",(0,t.jsx)(n.code,{children:"push"})," command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"prd push\n"})}),"\n",(0,t.jsxs)(n.p,{children:["And to release changes to production, run ",(0,t.jsx)(n.code,{children:"release"})," command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"prd release\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The local repository should always contain both ",(0,t.jsx)(n.code,{children:"source"})," and ",(0,t.jsx)(n.code,{children:"target"})," organization configurations. They can both be updated by calling ",(0,t.jsx)(n.code,{children:"prd pull"})," command. You can also run ",(0,t.jsx)(n.code,{children:"prd pull source"})," or ",(0,t.jsx)(n.code,{children:"prd pull target"})," to update only one."]}),"\n",(0,t.jsx)(n.h2,{id:"three-environments-for-sandbox-uat-and-production",children:"Three environments for sandbox, UAT, and production"}),"\n",(0,t.jsx)(n.p,{children:"Finally, the most complex pattern with three environments: sandbox, UAT, and production. In this scenario, several environments are chained one after the other."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(9543).A+"",width:"3632",height:"1524"})}),"\n",(0,t.jsxs)(n.p,{children:["For sandbox and UAT environment configurations, see the ",(0,t.jsx)(n.a,{href:"#two-environments-for-sandbox-and-production",children:"Two environments example"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["To configure the remaining production environment, it is necessary create a new Git branch and maintain there the configuration (from UAT to Production). Alternatively, for better transparency, create a new folder to store this configuration. This is necessary because ",(0,t.jsx)(n.code,{children:"prd"})," currently doesn't support multi-target configurations out of the box."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},6278:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/one-environment-diagram-a65a17e2652c1c487cd7241a9761db8f.png"},9543:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/three-environments-diagram-6bce834b5de8503cc656ced9b2a4d08b.png"},8421:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/two-environments-diagram-0109d546919686c1952862f3f140c435.png"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var o=s(6540);const t={},r=o.createContext(t);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);